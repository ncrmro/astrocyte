###
# Begin Elastic IP config
###

default_elastic_ip: &default_elastic_ip
  device_name: /dev/sda1
  volume_type: gp2
  volume_size: 40
  delete_on_termination: "{{ current_environment != 'production' }}"

aws_elastic_ip_tag_defaults: &default_elastic_ip_tags
    Project: "{{ namespace }}"
    Environment: "{{ current_environment }}"

aws_elastic_ip_astrocyte_elastic_ip_name: "astrocyte_elastic_ip"
aws_elastic_ip_astrocyte_elastic_ip:
  name: "{{aws_elastic_ip_astrocyte_elastic_ip_name}}"
  private_ip_address: ""
  allow_reassociation: no
  release_on_disassociation: "{{ current_environment != 'production' }}"
  tags:
    <<: *default_elastic_ip_tags
    Name: "{{aws_elastic_ip_astrocyte_elastic_ip_name}}"

aws_elastic_ip_volumes:
  - "{{ default_elastic_ip | combine(aws_elastic_ip_astrocyte_elastic_ip) }}"