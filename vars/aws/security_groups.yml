###
# Begin security group config
###

aws_ec2_securty_groups_whitelist:
  world:
  home:
    ip:
  office:

aws_ec2_security_groups_name_admin: "admin"
aws_ec2_security_groups_name_web: "web"

aws_ec2_tag_defaults: &default_tags
    Project: "{{ namespace }}"
    Environment: "{{ current_environment }}"

aws_ec2_securty_groups:
    - name: "{{ aws_ec2_security_groups_name_admin}}"
      description: security group for admin access
      tags:
        <<: *default_tags
        Name: "{{ aws_ec2_security_groups_name_admin}}"
      rules:
        - proto: tcp
          to_port: 22
          from_port: 22
          cidr_ip: "{{aws_ec2_securty_groups_whitelist['home'].ip}}/32"
    - name: "{{ aws_ec2_security_groups_name_web }}"
      description: security group for web access
      tags:
        <<: *default_tags
        Name: "{{ aws_ec2_security_groups_name_web}}"
      rules:
        - proto: tcp
          to_port: 80
          from_port: 80
          cidr_ip: "{{aws_ec2_securty_groups_whitelist['home'].ip}}/32"
        - proto: tcp
          to_port: 443
          from_port: 443
          cidr_ip: "{{aws_ec2_securty_groups_whitelist['home'].ip}}/32"
